<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Driver and Constructor</title>
    <link href="static/default.css" rel="stylesheet" type="text/css" />
    <style>
    </style>
</head>
<body>
    <form method='GET' action="{{ url_for("my_driver_add") }}">
        <div id="header">
            <h1>我的車手、車隊</h1>
        </div>
        <form method='GET' action="{{url_for("my_driver_add")}}">
            <td><button name=userId value={{userId}} type="submit">Add Driver</button></td>
        </form>
        <table class="user-table">
            <tr>
                <th>driverId</th>
                <th>driverRef</th>
                <th>number</th>
                <th>code</th>
                <th>forename</th>
                <th>surname</th>
                <th>dob</th>
                <th>nationality</th>
                <th>url</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            {% for row in myDriver%}
            <tr> 
                <td>{{row[0]}}</td>
                <td>{{row[1]}}</td>
                <td>{{row[2]}}</td>
                <td>{{row[3]}}</td>
                <td>{{row[4]}}</td>
                <td>{{row[5]}}</td>
                <td>{{row[6]}}</td>
                <td>{{row[7]}}</td>
                <td>{{row[8]}}</td>
                <td>
                    <button type="button" onclick="edit_driver('{{row[0]}}', '{{userId}}')">Edit</button>
                </td>
                <td>
                    <button type="button" onclick="delete_driver('{{row[0]}}', '{{userId}}')">Delete</button>
                </td>
            </tr>
            {% endfor%}
        </table>
        <br>
        <br>
        <form method='GET' action="{{url_for("my_constructor_add")}}">
            <td><button name=userId value={{userId}} type="submit">Add Constructor</button></td>
        </form>
        <table class="user-table">
            <tr>
                <th>constructorId</th>
                <th>constructorRef</th>
                <th>name</th>
                <th>nationality</th>
                <th>url</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            {% for row in myConstructor%}
            <tr> 
                <td>{{row[0]}}</td>
                <td>{{row[1]}}</td>
                <td>{{row[2]}}</td>
                <td>{{row[3]}}</td>
                <td>{{row[4]}}</td>
                <td>
                    <button type="button" onclick="edit_constructor('{{row[0]}}', '{{userId}}')">Edit</button>
                </td>
                <td>
                    <button type="button" onclick="delete_constructor('{{row[0]}}', '{{userId}}')">Delete</button>
                </td>
            </tr>
            {% endfor%}
        </table>
    </form>
    <script>
        function edit_driver(driverId, userId) {
            var form = document.createElement("form");
            form.method = "GET";
            form.action = "{{ url_for("my_driver_edit") }}";

            // Create and append hidden input for rowId
            var input = document.createElement("input");
            input.type = "hidden";
            input.name = "driverId";
            input.value = driverId;
            form.appendChild(input);

            var input = document.createElement("input");
            input.type = "hidden";
            input.name = "userId";
            input.value = userId;
            form.appendChild(input);

            // Append the form to the document
            document.body.appendChild(form);

            // Submit the form
            form.submit();
        }
        function delete_driver(driverId, userId) {
            if (confirm("Are you sure you want to delete this driver?")) {
                // Create a form dynamically
                var form = document.createElement("form");
                form.method = "GET";
                form.action = "{{ url_for("my_driver_delete") }}";

                // Create and append hidden input for rowId
                var input = document.createElement("input");
                input.type = "hidden";
                input.name = "driverId";
                input.value = driverId;
                form.appendChild(input);

                var input = document.createElement("input");
                input.type = "hidden";
                input.name = "userId";
                input.value = userId;
                form.appendChild(input);

                // Append the form to the document
                document.body.appendChild(form);

                // Submit the form
                form.submit();
            }
        }
        function edit_constructor(constructorId, userId) {
            var form = document.createElement("form");
            form.method = "GET";
            form.action = "{{ url_for("my_constructor_edit") }}";

            // Create and append hidden input for rowId
            var input = document.createElement("input");
            input.type = "hidden";
            input.name = "constructorId";
            input.value = constructorId;
            form.appendChild(input);

            var input = document.createElement("input");
            input.type = "hidden";
            input.name = "userId";
            input.value = userId;
            form.appendChild(input);

            // Append the form to the document
            document.body.appendChild(form);

            // Submit the form
            form.submit();
        }
        function delete_constructor(constructorId, userId) {
            if (confirm("Are you sure you want to delete this constructor?")) {
                // Create a form dynamically
                var form = document.createElement("form");
                form.method = "GET";
                form.action = "{{ url_for("my_constructor_delete") }}";

                // Create and append hidden input for rowId
                var input = document.createElement("input");
                input.type = "hidden";
                input.name = "constructorId";
                input.value = constructorId;
                form.appendChild(input);

                var input = document.createElement("input");
                input.type = "hidden";
                input.name = "userId";
                input.value = userId;
                form.appendChild(input);

                // Append the form to the document
                document.body.appendChild(form);

                // Submit the form
                form.submit();
            }
        }
    </script>
</body>
</html>
